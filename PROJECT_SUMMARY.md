# Wikidata Medical Tools - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚µãƒãƒªãƒ¼

## ğŸ“¦ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

Wikidataã‹ã‚‰åŒ»ç™‚ç”¨èªã¨ã‚«ãƒ†ã‚´ãƒªæƒ…å ±ã‚’æŠ½å‡ºã™ã‚‹Pythonãƒ„ãƒ¼ãƒ«ç¾¤ã§ã™ã€‚

## ğŸ—‚ï¸ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

### ãƒ¡ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«

1. **wikidataseekmed_improved.py** (47KB)
   - Wikidataã‹ã‚‰EN-JAåŒ»ç™‚ç”¨èªãƒšã‚¢ã‚’æŠ½å‡º
   - æ”¹å–„ç‰ˆï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã€å‹å®‰å…¨æ€§ã€ä¿å®ˆæ€§å‘ä¸Šï¼‰
   - è©³ç´°: README_improved.md

2. **wikidata_category_finder.py** (21KB) â­ NEW
   - æ—¥æœ¬èªã‚«ãƒ†ã‚´ãƒªã‹ã‚‰è‹±èªã‚«ãƒ†ã‚´ãƒªã‚’æ¤œç´¢
   - **å®Œå…¨ä¸€è‡´æ¤œç´¢ã§è‹±èªã‚«ãƒ†ã‚´ãƒªï¼‹Q numberã‚’å–å¾—** â­ NEW
   - **è¤‡æ•°ã‚«ãƒ†ã‚´ãƒªã®ãƒãƒƒãƒå‡¦ç†** â­ NEW
   - ã‚µãƒ–ã‚«ãƒ†ã‚´ãƒªã®éšå±¤æ¢ç´¢æ©Ÿèƒ½
   - è©³ç´°: CATEGORY_FINDER_GUIDE.md, NEW_FEATURES.md

### è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

3. **config.yaml** (3.6KB)
   - ã‚«ãƒ†ã‚´ãƒªå®šç¾©ã€ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã€ãƒªãƒˆãƒ©ã‚¤å›æ•°ãªã©ã‚’è¨­å®š
   - ç’°å¢ƒåˆ¥ã«ç°¡å˜ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½

4. **requirements.txt** (48B)
   - å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸: pandas, SPARQLWrapper, pyyaml

### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

5. **README_improved.md** (6.7KB)
   - æ”¹å–„ç‰ˆåŒ»ç™‚ç”¨èªæŠ½å‡ºãƒ„ãƒ¼ãƒ«ã®ä½¿ã„æ–¹

6. **CATEGORY_FINDER_GUIDE.md** (9.9KB)
   - ã‚«ãƒ†ã‚´ãƒªæ¤œç´¢ãƒ„ãƒ¼ãƒ«ã®ä½¿ã„æ–¹
   - å®Ÿè¡Œä¾‹ã¨å‡ºåŠ›ã‚µãƒ³ãƒ—ãƒ«

7. **WIKIDATA_CATEGORIES_EXPLAINED.md** (8.7KB)
   - Wikidataã®ã‚«ãƒ†ã‚´ãƒªã¨ã‚µãƒ–ã‚«ãƒ†ã‚´ãƒªã®æŠ€è¡“è§£èª¬
   - SPARQLã‚¯ã‚¨ãƒªã®è©³ç´°

8. **IMPROVEMENTS.md** (11KB)
   - 10ã®å•é¡Œç‚¹ã¨è§£æ±ºç­–ã®è©³ç´°èª¬æ˜
   - ã‚³ãƒ¼ãƒ‰æ¯”è¼ƒ

9. **QUICKSTART.md** (2.8KB)
   - ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆã‚¬ã‚¤ãƒ‰

10. **NEW_FEATURES.md** (5.7KB) â­ NEW
    - æ–°æ©Ÿèƒ½ã®è©³ç´°èª¬æ˜ï¼ˆå®Œå…¨ä¸€è‡´æ¤œç´¢ã€ãƒãƒƒãƒå‡¦ç†ï¼‰
    - å®Ÿç”¨ä¾‹ã¨ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰

### ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£

11. **demo_category_finder.sh** (3.0KB)
    - ã‚«ãƒ†ã‚´ãƒªæ¤œç´¢ãƒ„ãƒ¼ãƒ«ã®ãƒ‡ãƒ¢ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
    - å®Ÿè¡Œä¾‹ã¨ã‚ˆãä½¿ã†QIDã®ä¸€è¦§

12. **sample_japanese_categories.txt** â­ NEW
    - ãƒãƒƒãƒå‡¦ç†ç”¨ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«
    - ã‚³ãƒ¡ãƒ³ãƒˆä»˜ãã‚«ãƒ†ã‚´ãƒªãƒªã‚¹ãƒˆ

### ãƒ¬ã‚¬ã‚·ãƒ¼

13. **wikidataseekmed.py** (46KB)
    - ã‚ªãƒªã‚¸ãƒŠãƒ«ç‰ˆï¼ˆå‚ç…§ç”¨ï¼‰

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install -r requirements.txt

# ã¾ãŸã¯
pip install pandas>=1.3.0 SPARQLWrapper>=2.0.0 pyyaml>=5.4.0
```

## ğŸ“– ä½¿ã„æ–¹

### ãƒ„ãƒ¼ãƒ«1: åŒ»ç™‚ç”¨èªæŠ½å‡º

```bash
# Small scaleãƒ†ã‚¹ãƒˆ
python wikidataseekmed_improved.py --small --limit 100 --log logs/test.log

# Medium scale
python wikidataseekmed_improved.py --medium --limit 500 --batch-size 300 --log logs/medium.log

# ã‚«ãƒ†ã‚´ãƒªç™ºè¦‹ãƒ¢ãƒ¼ãƒ‰
python wikidataseekmed_improved.py --small --discover --limit 1000
```

### ãƒ„ãƒ¼ãƒ«2: ã‚«ãƒ†ã‚´ãƒªæ¤œç´¢ â­ NEW

```bash
# æ—¥æœ¬èªã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§æ¤œç´¢ï¼ˆéƒ¨åˆ†ä¸€è‡´ï¼‰
python wikidata_category_finder.py --search "ç—…æ°—" --limit 20

# æ—¥æœ¬èªã‚«ãƒ†ã‚´ãƒªã‹ã‚‰è‹±èªï¼‹Q numberã‚’å–å¾—ï¼ˆå®Œå…¨ä¸€è‡´ï¼‰â­ NEW
python wikidata_category_finder.py --exact "ç—…æ°—"
python wikidata_category_finder.py --exact "åŒ»è–¬å“"

# è¤‡æ•°ã‚«ãƒ†ã‚´ãƒªã‚’ä¸€æ‹¬å¤‰æ›ï¼ˆãƒãƒƒãƒå‡¦ç†ï¼‰â­ NEW
python wikidata_category_finder.py --batch sample_japanese_categories.txt --export-csv

# ã‚µãƒ–ã‚«ãƒ†ã‚´ãƒªã‚’æ¢ç´¢
python wikidata_category_finder.py --qid Q12136 --show-subcategories --depth 2

# CSVã«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
python wikidata_category_finder.py --exact "åŒ»å­¦" --export-csv

# çµ„ã¿åˆã‚ã›
python wikidata_category_finder.py --search "ãŒã‚“" --show-subcategories --export-json
```

## ğŸ¯ ä¸»ãªæ©Ÿèƒ½

### wikidataseekmed_improved.py

- âœ… åŒ»ç™‚ç”¨èªã®è‹±æ—¥ãƒšã‚¢æŠ½å‡º
- âœ… ã‚«ãƒ†ã‚´ãƒªåˆ¥ãƒ‡ãƒ¼ã‚¿å–å¾—
- âœ… MeSH, ICD-10, SNOMED CTãªã©ã®å¤–éƒ¨IDå–å¾—
- âœ… ãƒ‡ãƒ¼ã‚¿å“è³ªåˆ†æ
- âœ… CSV/JSONå‡ºåŠ›
- âœ… 504ã‚¨ãƒ©ãƒ¼å¯¾ç­–ï¼ˆãƒªãƒˆãƒ©ã‚¤ã€ãƒãƒƒã‚¯ã‚ªãƒ•ï¼‰

### wikidata_category_finder.py â­ NEW

- âœ… æ—¥æœ¬èªã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§ã‚«ãƒ†ã‚´ãƒªæ¤œç´¢ï¼ˆéƒ¨åˆ†ä¸€è‡´ï¼‰
- âœ… **æ—¥æœ¬èªã‚«ãƒ†ã‚´ãƒªâ†’è‹±èªã‚«ãƒ†ã‚´ãƒªï¼‹Q numberå¤‰æ›ï¼ˆå®Œå…¨ä¸€è‡´ï¼‰** â­ NEW
- âœ… **è¤‡æ•°ã‚«ãƒ†ã‚´ãƒªã®ä¸€æ‹¬å¤‰æ›ï¼ˆãƒãƒƒãƒå‡¦ç†ï¼‰** â­ NEW
- âœ… è‹±èªã‚«ãƒ†ã‚´ãƒªã¨ã®ãƒãƒƒãƒ”ãƒ³ã‚°
- âœ… ã‚µãƒ–ã‚«ãƒ†ã‚´ãƒªã®éšå±¤æ¢ç´¢ï¼ˆP279 subclass ofï¼‰
- âœ… ã‚«ãƒ†ã‚´ãƒªè©³ç´°æƒ…å ±å–å¾—
- âœ… CSV/JSONå‡ºåŠ›
- âœ… å¾ªç’°å‚ç…§å¯¾ç­–

## ğŸ” Wikidataã®ã‚«ãƒ†ã‚´ãƒªã«ã¤ã„ã¦

### ã‚µãƒ–ã‚«ãƒ†ã‚´ãƒªã¯è¨­å®šã•ã‚Œã¦ã„ã¾ã™ï¼

Wikidataã§ã¯ **P279 (subclass of)** ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§ã‚µãƒ–ã‚«ãƒ†ã‚´ãƒªã‚’è¡¨ç¾ï¼š

```
Q12136 (disease/ç—…æ°—)
â”œâ”€ Q18123741 (infectious disease/æ„ŸæŸ“ç—‡) [P279]
â”œâ”€ Q929833 (rare disease/å¸Œå°‘ç–¾æ‚£) [P279]
â”œâ”€ Q18965518 (mental disorder/ç²¾ç¥ç–¾æ‚£) [P279]
â””â”€ Q12124 (cancer/ãŒã‚“) [P279]
    â”œâ”€ Q47912 (lung cancer/è‚ºãŒã‚“) [P279]
    â””â”€ Q128581 (breast cancer/ä¹³ãŒã‚“) [P279]
```

è©³ç´°: WIKIDATA_CATEGORIES_EXPLAINED.md

## ğŸ“Š ã‚ˆãä½¿ã†åŒ»ç™‚ã‚«ãƒ†ã‚´ãƒª QID

| QID | æ—¥æœ¬èª | English |
|-----|--------|---------|
| Q12136 | ç—…æ°— | disease |
| Q12140 | åŒ»è–¬å“ | medication |
| Q169872 | ç—‡çŠ¶ | symptom |
| Q18123741 | æ„ŸæŸ“ç—‡ | infectious disease |
| Q12124 | ãŒã‚“ | cancer |
| Q8054 | ã‚¿ãƒ³ãƒ‘ã‚¯è³ª | protein |
| Q7187 | éºä¼å­ | gene |
| Q796194 | æ‰‹è¡“ | surgery |
| Q1059392 | åŒ»å­¦æ¤œæŸ» | medical test |

## ğŸ› ï¸ æ”¹å–„ç‚¹ï¼ˆwikidataseekmed_improved.pyï¼‰

å…ƒã®ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ä»¥ä¸‹ã‚’æ”¹å–„ï¼š

1. âœ… ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ï¼ˆSPARQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–ï¼‰
2. âœ… è¨­å®šã®å¤–éƒ¨åŒ–ï¼ˆYAMLï¼‰
3. âœ… å‹å®‰å…¨æ€§ï¼ˆType hintsï¼‰
4. âœ… ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆã‚¿ã‚¤ãƒ—åˆ¥å‡¦ç†ï¼‰
5. âœ… ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†ï¼ˆpathlibã€é©åˆ‡ãªãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†ï¼‰
6. âœ… ã‚³ãƒ¼ãƒ‰é‡è¤‡å‰Šæ¸›
7. âœ… ä¿å®ˆæ€§å‘ä¸Šï¼ˆf-stringã€dataclassï¼‰
8. âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›æ¤œè¨¼
9. âœ… ã‚°ãƒ­ãƒ¼ãƒãƒ«çŠ¶æ…‹ç®¡ç†
10. âœ… ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

è©³ç´°: IMPROVEMENTS.md

## ğŸ’¡ ä½¿ç”¨ä¾‹

### ä¾‹1: ç—…æ°—ã‚«ãƒ†ã‚´ãƒªã®å…¨ä½“åƒã‚’æŠŠæ¡

```bash
# ã‚«ãƒ†ã‚´ãƒªã‚’æ¤œç´¢
python wikidata_category_finder.py --search "ç—…æ°—" --limit 5

# ã‚µãƒ–ã‚«ãƒ†ã‚´ãƒªã‚’2éšå±¤ã¾ã§æ¢ç´¢
python wikidata_category_finder.py --qid Q12136 --show-subcategories --depth 2

# ç—…æ°—ã‚«ãƒ†ã‚´ãƒªã®ç”¨èªã‚’æŠ½å‡º
python wikidataseekmed_improved.py --small --limit 1000 --log logs/disease.log
```

### ä¾‹2: åŒ»å­¦ç¿»è¨³ç”¨ã®ç”¨èªé›†ä½œæˆ

```bash
# å„ã‚«ãƒ†ã‚´ãƒªã‚’æ¤œç´¢ã—ã¦ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
python wikidata_category_finder.py --search "ç—…æ°—" --export-csv
python wikidata_category_finder.py --search "åŒ»è–¬å“" --export-csv
python wikidata_category_finder.py --search "ç—‡çŠ¶" --export-csv

# è¦‹ã¤ã‘ãŸQIDã§ç”¨èªæŠ½å‡º
python wikidataseekmed_improved.py --medium --limit 5000 --export-csv
```

### ä¾‹3: ç‰¹å®šç–¾æ‚£ã®è©³ç´°èª¿æŸ»

```bash
# ãŒã‚“ã‚«ãƒ†ã‚´ãƒªã®ã‚µãƒ–ã‚«ãƒ†ã‚´ãƒªã‚’èª¿æŸ»
python wikidata_category_finder.py --qid Q12124 --show-subcategories --depth 3 --export-json

# ãŒã‚“é–¢é€£ç”¨èªã‚’æŠ½å‡º
# config.yamlã«Q12124ã‚’è¿½åŠ ã—ã¦ã‹ã‚‰å®Ÿè¡Œ
python wikidataseekmed_improved.py --small --limit 2000
```

## ğŸ“ å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«

### wikidataseekmed_improved.py ã®å‡ºåŠ›

```
output/
â”œâ”€â”€ small_medical_terms_full_20250127_123456.csv
â”œâ”€â”€ small_en_ja_pairs_20250127_123456.csv
â”œâ”€â”€ small_medical_terms_20250127_123456.json
â”œâ”€â”€ small_report_20250127_123456.txt
â””â”€â”€ by_category_20250127_123456/
    â”œâ”€â”€ disease.csv
    â”œâ”€â”€ medication.csv
    â””â”€â”€ ...
```

### wikidata_category_finder.py ã®å‡ºåŠ›

```
output/
â”œâ”€â”€ category_mapping.json
â””â”€â”€ category_mapping.csv
```

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ä¾å­˜é–¢ä¿‚ã‚¨ãƒ©ãƒ¼

```bash
pip install -r requirements.txt
```

### 504 Gateway Timeout

```bash
# config.yamlã‚’ç·¨é›†
query:
  batch_size: 200  # 1000ã‹ã‚‰æ¸›ã‚‰ã™
  max_retries: 8
  retry_wait_504_base: 20

# ã¾ãŸã¯ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã§
python wikidataseekmed_improved.py --small --batch-size 200
```

### ã‚«ãƒ†ã‚´ãƒªãŒè¦‹ã¤ã‹ã‚‰ãªã„

```bash
# çŸ­ã„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’è©¦ã™
python wikidata_category_finder.py --search "åŒ»"

# è‹±èªã§ã‚‚æ¤œç´¢å¯èƒ½
python wikidata_category_finder.py --search "medicine"
```

## ğŸ“š ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆè©³ç´°

| ãƒ•ã‚¡ã‚¤ãƒ« | å†…å®¹ |
|---------|------|
| QUICKSTART.md | ã™ãã«å§‹ã‚ã‚‹ |
| README_improved.md | åŒ»ç™‚ç”¨èªæŠ½å‡ºãƒ„ãƒ¼ãƒ«ã®è©³ç´° |
| CATEGORY_FINDER_GUIDE.md | ã‚«ãƒ†ã‚´ãƒªæ¤œç´¢ãƒ„ãƒ¼ãƒ«ã®è©³ç´° |
| WIKIDATA_CATEGORIES_EXPLAINED.md | Wikidataã‚«ãƒ†ã‚´ãƒªã®æŠ€è¡“è§£èª¬ |
| IMPROVEMENTS.md | ã‚³ãƒ¼ãƒ‰æ”¹å–„ã®è©³ç´° |

## ğŸ‰ ã¾ã¨ã‚

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€Wikidataã‹ã‚‰åŒ»ç™‚æƒ…å ±ã‚’åŠ¹ç‡çš„ã«æŠ½å‡ºã™ã‚‹ãŸã‚ã®2ã¤ã®ãƒ„ãƒ¼ãƒ«ã‚’æä¾›ï¼š

1. **wikidataseekmed_improved.py**: åŒ»ç™‚ç”¨èªã®è‹±æ—¥ãƒšã‚¢ã‚’å¤§é‡æŠ½å‡º
2. **wikidata_category_finder.py**: ã‚«ãƒ†ã‚´ãƒªã¨ãã®éšå±¤æ§‹é€ ã‚’æ¢ç´¢

ä¸¡ãƒ„ãƒ¼ãƒ«ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€åŒ»ç™‚åˆ†é‡ã®åŒ…æ‹¬çš„ãªãƒ‡ãƒ¼ã‚¿åé›†ãŒå¯èƒ½ã§ã™ã€‚

---

**è³ªå•: WikiDataã«ã¯ã‚µãƒ–ã‚«ãƒ†ã‚´ãƒªã¯è¨­å®šã•ã‚Œã¦ã„ã¾ã™ã‹ï¼Ÿ**

**å›ç­”: ã¯ã„ï¼** Wikidataã«ã¯ **P279 (subclass of)** ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ä½¿ã£ãŸè±Šå¯Œãªã‚µãƒ–ã‚«ãƒ†ã‚´ãƒªä½“ç³»ãŒã‚ã‚Šã¾ã™ã€‚`wikidata_category_finder.py`ã§ã“ã®éšå±¤æ§‹é€ ã‚’ç°¡å˜ã«æ¢ç´¢ã§ãã¾ã™ã€‚

è©³ç´°ã¯ WIKIDATA_CATEGORIES_EXPLAINED.md ã‚’ã”è¦§ãã ã•ã„ã€‚
