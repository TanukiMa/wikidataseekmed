# ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¬ã‚¤ãƒ‰ - ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã‚¨ãƒ©ãƒ¼å¯¾ç­–

## å•é¡Œ: ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹

```
âŒ Error during exact search: The read operation timed out
```

ã¾ãŸã¯

```
âŒ Query timeout after 3 attempts
```

---

## åŽŸå› 

1. **ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®é…å»¶** - ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæŽ¥ç¶šãŒé…ã„
2. **Wikidataã‚µãƒ¼ãƒãƒ¼ã®è² è·** - ã‚µãƒ¼ãƒãƒ¼ãŒæ··é›‘ã—ã¦ã„ã‚‹
3. **è¤‡é›‘ãªã‚¯ã‚¨ãƒª** - æ¤œç´¢å¯¾è±¡ãŒå¤šã™ãŽã‚‹

---

## è§£æ±ºç­–

### æ–¹æ³•1: è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤ã‚’æ´»ç”¨ï¼ˆæ—¢ã«å®Ÿè£…æ¸ˆã¿ï¼‰

ã‚³ãƒ¼ãƒ‰ã¯è‡ªå‹•çš„ã«3å›žã¾ã§ãƒªãƒˆãƒ©ã‚¤ã—ã¾ã™ï¼š

```python
# 1å›žç›®: ã™ãã«å®Ÿè¡Œ
# 2å›žç›®: 2ç§’å¾…æ©Ÿå¾Œ
# 3å›žç›®: 4ç§’å¾…æ©Ÿå¾Œ
# 4å›žç›®: 8ç§’å¾…æ©Ÿå¾Œ
```

**å¾…ã¤ã ã‘ã§è§£æ±ºã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ï¼**

---

### æ–¹æ³•2: éƒ¨åˆ†ä¸€è‡´æ¤œç´¢ã‚’ä½¿ã†

å®Œå…¨ä¸€è‡´ï¼ˆ`--exact`ï¼‰ã§ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã™ã‚‹å ´åˆã€éƒ¨åˆ†ä¸€è‡´æ¤œç´¢ï¼ˆ`--search`ï¼‰ã‚’è©¦ã—ã¦ãã ã•ã„ï¼š

```bash
# ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã™ã‚‹
python wikidata_category_finder.py --exact "ç–«å­¦"

# ä»£ã‚ã‚Šã«ã“ã¡ã‚‰ã‚’è©¦ã™
python wikidata_category_finder.py --search "ç–«å­¦" --limit 10
```

**ç†ç”±:** éƒ¨åˆ†ä¸€è‡´æ¤œç´¢ã¯ç•°ãªã‚‹ã‚¯ã‚¨ãƒªæœ€é©åŒ–ã‚’ä½¿ã†ãŸã‚ã€æˆåŠŸã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

---

### æ–¹æ³•3: æ™‚é–“ã‚’ãŠã„ã¦å†è©¦è¡Œ

Wikidataã‚µãƒ¼ãƒãƒ¼ãŒæ··é›‘ã—ã¦ã„ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ï¼š

```bash
# æ•°åˆ†å¾…ã£ã¦ã‹ã‚‰å†è©¦è¡Œ
sleep 300  # 5åˆ†å¾…æ©Ÿ
python wikidata_category_finder.py --exact "ç–«å­¦"

# ã¾ãŸã¯åˆ¥ã®æ™‚é–“å¸¯ã«è©¦ã™ï¼ˆæ·±å¤œã‚„æ—©æœãªã©ï¼‰
```

---

### æ–¹æ³•4: ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæŽ¥ç¶šã‚’ç¢ºèª

```bash
# Wikidataã¸ã®æŽ¥ç¶šã‚’ãƒ†ã‚¹ãƒˆ
curl -I https://query.wikidata.org/sparql

# æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›:
# HTTP/2 200
# ...
```

æŽ¥ç¶šãŒé…ã„å ´åˆï¼š
- Wi-Fiã‚’å†æŽ¥ç¶š
- æœ‰ç·šLANã«åˆ‡ã‚Šæ›¿ãˆ
- VPNã‚’ä¸€æ™‚çš„ã«ã‚ªãƒ•ã«ã™ã‚‹

---

### æ–¹æ³•5: ã‚ˆã‚Šå…·ä½“çš„ãªæ¤œç´¢ã‚’è©¦ã™

è‹±èªžåãŒã‚ã‹ã£ã¦ã„ã‚‹å ´åˆï¼š

```bash
# è‹±èªžã§æ¤œç´¢ï¼ˆWikidataã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆUIè¨€èªžã®ãŸã‚é«˜é€Ÿï¼‰
python wikidata_category_finder.py --search "epidemiology" --limit 5
```

---

### æ–¹æ³•6: Wikidata Web UIã§ç›´æŽ¥ç¢ºèª

ãƒ–ãƒ©ã‚¦ã‚¶ã§ç¢ºèªï¼š

1. https://www.wikidata.org/ ã«ã‚¢ã‚¯ã‚»ã‚¹
2. æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹ã«ã€Œç–«å­¦ã€ã¨å…¥åŠ›
3. å€™è£œã‹ã‚‰é¸æŠž
4. URLã‹ã‚‰Q numberã‚’å–å¾—ï¼ˆä¾‹: `https://www.wikidata.org/wiki/Q133212` â†’ `Q133212`ï¼‰

ãã®å¾Œã€Q numberã§ç›´æŽ¥æ¤œç´¢ï¼š

```bash
python wikidata_category_finder.py --qid Q133212
```

---

## ã€Œç–«å­¦ã€ã®ä¾‹

**ç–«å­¦ (epidemiology)** ã®å ´åˆï¼š

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³1: Web UIã§ç¢ºèª

https://www.wikidata.org/wiki/Q133212

```
QID: Q133212
æ—¥æœ¬èªž: ç–«å­¦
English: epidemiology
```

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³2: éƒ¨åˆ†ä¸€è‡´æ¤œç´¢

```bash
python wikidata_category_finder.py --search "ç–«å­¦" --limit 5
```

å‡ºåŠ›ä¾‹ï¼š
```
[1] ðŸ·ï¸  Q133212
   ðŸ‡¯ðŸ‡µ æ—¥æœ¬èªž: ç–«å­¦
   ðŸ‡¬ðŸ‡§ English: epidemiology
```

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³3: QIDã§ç›´æŽ¥ã‚¢ã‚¯ã‚»ã‚¹

```bash
python wikidata_category_finder.py --qid Q133212 --show-details
```

---

## ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå¯¾ç­–ã®æ”¹å–„ç‚¹ï¼ˆv2.1ï¼‰

### å®Ÿè£…ã•ã‚ŒãŸæ©Ÿèƒ½

1. **ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæ™‚é–“ã®å»¶é•·**: 60ç§’ â†’ 120ç§’
2. **è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤**: æœ€å¤§3å›žã®å†è©¦è¡Œ
3. **æŒ‡æ•°ãƒãƒƒã‚¯ã‚ªãƒ•**: å¾…æ©Ÿæ™‚é–“ãŒå¾ã€…ã«å¢—åŠ ï¼ˆ2ç§’ â†’ 4ç§’ â†’ 8ç§’ï¼‰
4. **è©³ç´°ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸**: ä½•ãŒèµ·ããŸã‹æ˜Žç¢ºã«è¡¨ç¤º
5. **ä»£æ›¿æ¡ˆã®æç¤º**: å¤±æ•—æ™‚ã«æ¬¡ã®æ‰‹é †ã‚’ææ¡ˆ

### ã‚³ãƒ¼ãƒ‰ä¾‹

```python
# ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæ™‚ã®å‹•ä½œ
ðŸŽ¯ Finding exact match for Japanese category: 'ç–«å­¦'
--------------------------------------------------------------------------------
âš ï¸  Query timeout (attempt 1/3)
â³ Retry attempt 2/3 after 2s...
âš ï¸  Query timeout (attempt 2/3)
â³ Retry attempt 3/3 after 4s...
âœ… Found exact match!  # æˆåŠŸï¼
```

---

## ã‚ˆãã‚ã‚‹è³ªå•

### Q1: ãªãœã€Œç—…æ°—ã€ã¯æˆåŠŸã—ã¦ã€Œç–«å­¦ã€ã¯å¤±æ•—ã™ã‚‹ã®ã‹ï¼Ÿ

**A:** Wikidataãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å†…ã§ã®ä»¥ä¸‹ã®é•ã„ï¼š

1. **ã‚¨ãƒ³ãƒˆãƒªæ•°**: ã€Œç—…æ°—ã€ã¯ä¸€èˆ¬çš„ã§æœ€é©åŒ–ã•ã‚Œã¦ã„ã‚‹
2. **ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹**: ã‚ˆãæ¤œç´¢ã•ã‚Œã‚‹ç”¨èªžã¯é«˜é€Ÿ
3. **ã‚¿ã‚¤ãƒŸãƒ³ã‚°**: ã‚µãƒ¼ãƒãƒ¼è² è·ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã®é•ã„

### Q2: ã™ã¹ã¦ã®ã‚«ãƒ†ã‚´ãƒªã§ç¢ºå®Ÿã«æˆåŠŸã™ã‚‹æ–¹æ³•ã¯ï¼Ÿ

**A:** ãƒãƒƒãƒå‡¦ç† + ãƒªãƒˆãƒ©ã‚¤ + ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼š

```bash
# Step 1: ãƒãƒƒãƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’æº–å‚™
cat > categories.txt << EOF
ç–«å­¦
ç—…ç†å­¦
ç”Ÿç†å­¦
è§£å‰–å­¦
EOF

# Step 2: ãƒãƒƒãƒå‡¦ç†ï¼ˆè‡ªå‹•ãƒªãƒˆãƒ©ã‚¤ä»˜ãï¼‰
python wikidata_category_finder.py --batch categories.txt --export-csv

# Step 3: å¤±æ•—ã—ãŸã‚‚ã®ã¯å€‹åˆ¥ã«éƒ¨åˆ†ä¸€è‡´æ¤œç´¢
python wikidata_category_finder.py --search "ç–«å­¦"
```

### Q3: ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã‚’å®Œå…¨ã«é¿ã‘ã‚‹ã“ã¨ã¯ã§ãã‚‹ï¼Ÿ

**A:** 100%ã®ä¿è¨¼ã¯ã§ãã¾ã›ã‚“ãŒã€ä»¥ä¸‹ã§ç¢ºçŽ‡ã‚’ä¸Šã’ã‚‰ã‚Œã¾ã™ï¼š

1. âœ… å®‰å®šã—ãŸã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæŽ¥ç¶š
2. âœ… ã‚µãƒ¼ãƒãƒ¼ãŒç©ºã„ã¦ã„ã‚‹æ™‚é–“å¸¯ï¼ˆæ·±å¤œãªã©ï¼‰
3. âœ… éƒ¨åˆ†ä¸€è‡´æ¤œç´¢ã‚’å„ªå…ˆçš„ã«ä½¿ç”¨
4. âœ… ãƒãƒƒãƒå‡¦ç†ã§è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤ã‚’æ´»ç”¨

---

## ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

| çŠ¶æ³ | æŽ¨å¥¨ã‚³ãƒžãƒ³ãƒ‰ |
|-----|------------|
| ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆãŒç™ºç”Ÿ | `--search "ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰"` ã§éƒ¨åˆ†ä¸€è‡´æ¤œç´¢ |
| éƒ¨åˆ†ä¸€è‡´ã‚‚å¤±æ•— | æ™‚é–“ã‚’ãŠã„ã¦å†è©¦è¡Œã€ã¾ãŸã¯Web UIã§ç¢ºèª |
| Q numberãŒã‚ã‹ã‚‹ | `--qid Qç•ªå·` ã§ç›´æŽ¥ã‚¢ã‚¯ã‚»ã‚¹ |
| è¤‡æ•°ã‚«ãƒ†ã‚´ãƒª | `--batch ãƒ•ã‚¡ã‚¤ãƒ«å` ã§ãƒãƒƒãƒå‡¦ç†ï¼ˆè‡ªå‹•ãƒªãƒˆãƒ©ã‚¤ï¼‰ |

---

## ã‚µãƒãƒ¼ãƒˆæƒ…å ±

### Wikidataé–¢é€£

- **ã‚¯ã‚¨ãƒªã‚µãƒ¼ãƒ“ã‚¹**: https://query.wikidata.org/
- **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: https://status.wikimedia.org/
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: https://www.wikidata.org/wiki/Wikidata:SPARQL_tutorial

### ã“ã®ãƒ„ãƒ¼ãƒ«é–¢é€£

- **Issueå ±å‘Š**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®Issueãƒˆãƒ©ãƒƒã‚«ãƒ¼
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: CATEGORY_FINDER_GUIDE.md
- **æ–°æ©Ÿèƒ½**: NEW_FEATURES.md

---

## ã¾ã¨ã‚

ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã‚¨ãƒ©ãƒ¼ã¯å®Œå…¨ã«ã¯é¿ã‘ã‚‰ã‚Œã¾ã›ã‚“ãŒã€ä»¥ä¸‹ã®å¯¾ç­–ã§å¤§å¹…ã«æ”¹å–„ã§ãã¾ã™ï¼š

1. âœ… **è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½ã‚’æ´»ç”¨**ï¼ˆæ—¢ã«å®Ÿè£…æ¸ˆã¿ï¼‰
2. âœ… **éƒ¨åˆ†ä¸€è‡´æ¤œç´¢ã‚’ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã¨ã—ã¦ä½¿ç”¨**
3. âœ… **æ™‚é–“å¸¯ã‚’å¤‰ãˆã¦å†è©¦è¡Œ**
4. âœ… **Wikidata Web UIã§è£œå®Œ**

ã»ã¨ã‚“ã©ã®å ´åˆã€ä¸Šè¨˜ã®æ–¹æ³•ã§è§£æ±ºã§ãã¾ã™ï¼

---

## ãƒãƒ¼ã‚¸ãƒ§ãƒ³å±¥æ­´

### v2.1.1 (æœ€æ–°) - ãƒã‚°ä¿®æ­£

**ä¿®æ­£å†…å®¹:**
- âœ… `socket` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆè¿½åŠ 
- âœ… `HTTPError` ã®é©åˆ‡ãªå‡¦ç†è¿½åŠ 
- âœ… HTTP 504 å°‚ç”¨ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- âœ… `traceback` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®é©åˆ‡ãªã‚¤ãƒ³ãƒãƒ¼ãƒˆ

**å‹•ä½œ:**
```bash
python wikidata_category_finder.py --exact "ç–«å­¦"

# æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œ:
# âš ï¸  Wikidata server timeout (HTTP 504) (attempt 1/3)
# â³ Retry attempt 2/3 after 2s...
# âœ… Found exact match!
```

### v2.1 - ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå¯¾ç­–

- ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæ™‚é–“å»¶é•·ï¼ˆ60ç§’ â†’ 120ç§’ï¼‰
- è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½ï¼ˆæœ€å¤§3å›žï¼‰
- æŒ‡æ•°ãƒãƒƒã‚¯ã‚ªãƒ•ï¼ˆ2ç§’ â†’ 4ç§’ â†’ 8ç§’ï¼‰

### v2.0 - æ–°æ©Ÿèƒ½è¿½åŠ 

- å®Œå…¨ä¸€è‡´æ¤œç´¢ (`--exact`)
- ãƒãƒƒãƒå‡¦ç† (`--batch`)
- ã‚µãƒ–ã‚«ãƒ†ã‚´ãƒªæŽ¢ç´¢
